<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Love Letter üíñ</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#ffb6c1,#ffc0cb,#ffd6e0);
    background-size:400% 400%;
    animation:bgMove 10s infinite alternate;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    overflow:hidden;
}

@keyframes bgMove{
    0%{background-position:left;}
    100%{background-position:right;}
}

/* ‡∏î‡∏≤‡∏ß */
.star{
    position:absolute;
    width:3px;
    height:3px;
    background:white;
    border-radius:50%;
    animation:twinkle 2s infinite ease-in-out;
}

@keyframes twinkle{
    0%,100%{opacity:0.2;}
    50%{opacity:1;}
}

/* ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏≠‡∏¢ */
.heart{
    position:absolute;
    color:rgb(255, 138, 181);
    font-size:18px;
    animation:floatUp 8s linear forwards;
}

@keyframes floatUp{
    from{transform:translateY(0); opacity:1;}
    to{transform:translateY(-600px); opacity:0;}
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å */
.container{
    width:360px;
    min-height: 450px;
    background:white;
    border-radius:30px;
    padding:40px 25px;
    text-align:center;
    box-shadow:0 15px 50px rgba(0,0,0,0.25);
    position:relative;
    z-index:10;
}

.page{
    display:none;
    width:100%;
}

.page.active{
    display:block;
    animation:fadeIn 0.6s ease;
}

@keyframes fadeIn{
    from{opacity:0;transform:translateY(20px);}
    to{opacity:1;transform:translateY(0);}
}

.profile-img{
    width:180px;height:180px;
    border-radius:50%;
    object-fit:cover;
    margin-bottom:15px;
}

/* Scratch Card */
.scratch-card{
    width:100%;
    height:300px;
    border-radius:20px;
    overflow:hidden;
    position:relative;
    margin-bottom:20px;
}

.scratch-card img{
    width:100%;
    height:100%;
    object-fit:cover;
}

.scratch{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    border-radius:20px;
}

/* ‡∏õ‡∏∏‡πà‡∏° */
button{
    background:#ff4d6d;
    border:none;
    padding:15px 35px;
    border-radius:25px;
    color:white;
    font-size:16px;
    cursor:pointer;
}

button:hover{transform:scale(1.05);}

/* ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ */
.finalGlow{
    animation:glow 2s infinite alternate;
}

@keyframes glow{
    from{box-shadow:0 0 10px #ff4d6d;}
    to{box-shadow:0 0 30px #ff1493;}
}

.envelope{
    width:100%;
    height:320px;
    background:#ffe4ea;
    border-radius:20px;
    position:relative;
    overflow:hidden;
}

.letter{
    width:100%;
    height:100%;
    background:white;
    padding:15px;
    box-sizing:border-box;
    overflow:auto;
}

.letter img{
    width:100%;
    border-radius:15px;
    margin-top:10px;
}
</style>
</head>

<body>

<div class="container">

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 1 -->
<div class="page active" id="page1">
    <img src="1.jpg" class="profile-img">
    <h2 style="color:#ff4d6d;">My Valentine</h2>
    <p>‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ß‡∏≤‡πÄ‡∏•‡∏ô‡πÑ‡∏ó‡∏ô‡πå‡∏ô‡∏µ‡πâ<br>‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á ‡πÜ üíñ</p>
    <button onclick="nextPage()">Open</button>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 2 -->
<div class="page" id="page2">
    <div class="scratch-card">
        <img src="./1.jpg">
        <canvas class="scratch"></canvas>
    </div>
    <button onclick="nextPage()">Next</button>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 3 -->
<div class="page" id="page3">
    <div class="scratch-card">
        <img src="./2.jpg">
        <canvas class="scratch"></canvas>
    </div>
    <button onclick="nextPage()">Next</button>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 4 -->
<div class="page" id="page4">
    <div class="scratch-card">
        <img src="./3.jpg">
        <canvas class="scratch"></canvas>
    </div>
    <button onclick="nextPage()">Next</button>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤ 5 -->
<div class="page" id="page5">
    <div class="envelope finalGlow">
        <div class="letter">
            <h2 style="color:#ff1493;">To Nongfah</h2>
            <p id="typeText"></p>
            <img src="./4.jpg">
        </div>
    </div>
</div>

</div>

<audio id="loveSong" src="song.mp3"></audio>

<script>
let currentPage=1;
const totalPages=5;

/* ‡∏î‡∏≤‡∏ß */
for(let i=0;i<80;i++){
    let star=document.createElement("div");
    star.className="star";
    star.style.top=Math.random()*100+"%";
    star.style.left=Math.random()*100+"%";
    star.style.animationDelay=Math.random()*2+"s";
    document.body.appendChild(star);
}

/* ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏≠‡∏¢ */
setInterval(()=>{
    let heart=document.createElement("div");
    heart.className="heart";
    heart.innerHTML="‚ù§Ô∏è";
    heart.style.left=Math.random()*100+"%";
    heart.style.bottom="0px";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),6000);
},800);

/* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤ */
function nextPage(){
    if(currentPage<totalPages){
        document.getElementById("page"+currentPage).classList.remove("active");
        currentPage++;
        document.getElementById("page"+currentPage).classList.add("active");

        if(currentPage===2 || currentPage===3 || currentPage===4){
            setTimeout(()=>{
                initScratch("page"+currentPage);
            },200);
        }

        if(currentPage===5){
            startFinal();
        }
    }
}

/* Scratch Effect */
function initScratch(pageId){
    const page = document.getElementById(pageId);
    const canvas = page.querySelector(".scratch");
    const ctx = canvas.getContext("2d");

    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;

    ctx.fillStyle = "#c0c0c0";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.globalCompositeOperation = "destination-out";

    let isDrawing = false;

    function scratch(e){
        if(!isDrawing) return;
        const rect = canvas.getBoundingClientRect();
        const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
        const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;

        ctx.beginPath();
        ctx.arc(x,y,20,0,Math.PI*2);
        ctx.fill();
    }

    canvas.addEventListener("mousedown",()=>isDrawing=true);
    canvas.addEventListener("mouseup",()=>isDrawing=false);
    canvas.addEventListener("mousemove",scratch);

    canvas.addEventListener("touchstart",()=>isDrawing=true);
    canvas.addEventListener("touchend",()=>isDrawing=false);
    canvas.addEventListener("touchmove",scratch);
}

/* ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ */
function startFinal(){
    document.getElementById("loveSong").play();

    const text="‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡πÄ‡∏•‡∏¢ üíñ";
    let i=0;
    function type(){
        if(i<text.length){
            document.getElementById("typeText").innerHTML+=text.charAt(i);
            i++;
            setTimeout(type,50);
        }
    }
    type();

    setInterval(()=>{
        let heart=document.createElement("div");
        heart.className="heart";
        heart.innerHTML="üíñ";
        heart.style.fontSize=(20+Math.random()*30)+"px";
        heart.style.left=Math.random()*100+"%";
        heart.style.bottom="0px";
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(),6000);
    },300);
}
</script>

</body>
</html>
